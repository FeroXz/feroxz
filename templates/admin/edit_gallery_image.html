{% extends "base.html" %}
{% set is_edit = image is not none %}
{% block title %}{{ 'Bild bearbeiten' if is_edit else 'Neues Bild hinzufügen' }} - Feroxz CMS{% endblock %}
{% block content %}
<section class="editor">
  <div class="editor-header">
    <h1>{{ 'Bild bearbeiten' if is_edit else 'Neues Bild hinzufügen' }}</h1>
    <a class="link" href="{{ url_for('admin_gallery') }}">Zurück</a>
  </div>
  <form method="post" class="form" enctype="multipart/form-data">
    <label for="title">Titel</label>
    <input
      type="text"
      id="title"
      name="title"
      value="{{ image.title if image else '' }}"
      placeholder="Optional"
    />

    <label for="description">Beschreibung</label>
    <textarea
      id="description"
      name="description"
      rows="3"
      placeholder="Optional"
    >{{ image.description if image else '' }}</textarea>

    <label for="image">Bilddatei{% if not image %}*{% endif %}</label>
    <input type="file" id="image" name="image" accept="image/*"{% if not image %} required{% endif %} />

    {% if image %}
    <div class="current-image-preview">
      <p>Aktuelles Bild:</p>
      <img
        src="{{ url_for('static', filename=image.image_path) }}"
        alt="{{ image.title or 'Galeriebild' }}"
      />
    </div>
    {% endif %}

    <button class="btn" type="submit">Speichern</button>
  </form>
</section>
{% endblock %}
