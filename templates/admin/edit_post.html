{% extends "base.html" %}
{% if post %}
  {% set page_title = "Beitrag bearbeiten" %}
{% else %}
  {% set page_title = "Neuen Beitrag erstellen" %}
{% endif %}
{% block title %}{{ page_title }} - Feroxz CMS{% endblock %}
{% block content %}
<section class="editor">
  <div class="editor-header">
    <h1>{{ page_title }}</h1>
    <a class="link" href="{{ url_for('admin_dashboard') }}">Zur√ºck</a>
  </div>
  <form method="post" class="form">
    <label for="title">Titel</label>
    <input
      type="text"
      id="title"
      name="title"
      value="{{ post.title if post else '' }}"
      required
    />

    <label for="content">Inhalt</label>
    <textarea id="content" name="content" rows="10" required>{{ (post.content if post else '') | safe }}</textarea>

    <button class="btn" type="submit">Speichern</button>
  </form>
</section>
{% endblock %}

{% block extra_scripts %}
  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <script>
    tinymce.init({
      selector: "#content",
      height: 420,
      menubar: false,
      plugins: "link lists image table media code autoresize",
      toolbar:
        "undo redo | styles | bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | link image media table | removeformat code",
      skin: "oxide-dark",
      content_css: "dark",
      image_advtab: true,
      automatic_uploads: true,
      images_upload_url: "{{ url_for('admin_upload_post_image') }}",
      images_upload_credentials: true,
      convert_urls: false,
      branding: false,
    });
  </script>
{% endblock %}
